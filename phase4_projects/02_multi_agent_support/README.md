# 项目二：多代理智能客服系统

## 📋 项目概述

本项目构建一个多代理协作的智能客服系统，能够根据用户问题自动分类并路由到专业代理处理。系统支持技术支持、订单查询、产品咨询等多种服务场景。

## 🎯 项目目标

通过本项目，你将学会：
- 设计多代理协作架构
- 实现智能意图分类和路由
- 构建专业领域代理
- 管理代理间的状态传递
- 实现人工客服升级机制
- 添加服务质量监控

## 🏗️ 系统架构

```
┌─────────────────────────────────────────────────────────────────┐
│                    多代理客服系统架构                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                      ┌──────────────┐                           │
│                      │   用户输入    │                           │
│                      └──────┬───────┘                           │
│                             │                                   │
│                             ▼                                   │
│                      ┌──────────────┐                           │
│                      │  意图分类器   │                           │
│                      └──────┬───────┘                           │
│                             │                                   │
│           ┌─────────────────┼─────────────────┐                │
│           │                 │                 │                 │
│           ▼                 ▼                 ▼                 │
│    ┌────────────┐   ┌────────────┐   ┌────────────┐            │
│    │ 技术支持    │   │ 订单服务    │   │ 产品咨询    │            │
│    │   代理      │   │   代理      │   │   代理      │            │
│    └─────┬──────┘   └─────┬──────┘   └─────┬──────┘            │
│          │                │                │                    │
│          │         ┌──────┴──────┐        │                    │
│          │         │  工具调用   │        │                    │
│          │         │ (查询/操作) │        │                    │
│          │         └──────┬──────┘        │                    │
│          │                │                │                    │
│          └────────────────┼────────────────┘                   │
│                           │                                     │
│                           ▼                                     │
│                    ┌──────────────┐                             │
│                    │  质量检查    │                             │
│                    └──────┬───────┘                             │
│                           │                                     │
│              ┌────────────┴────────────┐                       │
│              │                         │                        │
│              ▼                         ▼                        │
│       ┌────────────┐           ┌────────────┐                  │
│       │ 返回用户    │           │ 升级人工    │                  │
│       └────────────┘           └────────────┘                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## 📁 项目结构

```
02_multi_agent_support/
├── README.md              # 项目文档
├── main.py                # 主程序入口
├── agents/                # 代理模块
│   ├── classifier.py      # 意图分类代理
│   ├── tech_support.py    # 技术支持代理
│   ├── order_service.py   # 订单服务代理
│   └── product_consult.py # 产品咨询代理
├── tools/                 # 工具模块
│   ├── order_tools.py     # 订单相关工具
│   └── product_tools.py   # 产品相关工具
└── utils/                 # 工具函数
    └── quality_check.py   # 质量检查
```

## 🤖 代理角色

### 1. 意图分类代理 (Classifier)
- 分析用户消息
- 识别意图类型
- 路由到专业代理

### 2. 技术支持代理 (TechSupport)
- 处理技术问题
- 提供故障排除指南
- 收集问题信息

### 3. 订单服务代理 (OrderService)
- 查询订单状态
- 处理退换货
- 物流跟踪

### 4. 产品咨询代理 (ProductConsult)
- 产品功能介绍
- 价格咨询
- 产品推荐

## 🔧 核心功能

### 意图分类
- 技术支持：故障、错误、无法使用
- 订单服务：订单、发货、退款
- 产品咨询：价格、功能、推荐
- 其他/升级：无法分类或需要人工

### 服务质量监控
- 回答完整性检查
- 敏感词过滤
- 满意度预测
- 升级条件判断

## 🚀 快速开始

```bash
# 1. 设置环境变量
export OPENAI_API_KEY="your-api-key"

# 2. 运行示例
python main.py
```

## 💡 最佳实践

1. **清晰的代理边界**: 每个代理专注于特定领域
2. **优雅的降级**: 无法处理时及时升级
3. **上下文传递**: 保持对话连贯性
4. **质量保证**: 回答发送前进行检查
5. **监控告警**: 实时监控系统性能

## 🔮 扩展思路

- 添加更多专业代理
- 集成真实业务系统
- 实现代理间协作
- 添加用户画像分析
- 多语言支持
