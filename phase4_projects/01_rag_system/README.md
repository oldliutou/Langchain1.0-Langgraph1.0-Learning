# 项目一：RAG 检索增强生成系统

## 📋 项目概述

本项目构建一个完整的 RAG（Retrieval-Augmented Generation）系统，支持多种文档格式、智能检索和对话式问答。这是一个生产级别的实现，整合了前面所学的所有基础知识。

## 🎯 项目目标

通过本项目，你将学会：
- 构建端到端的 RAG 流水线
- 实现多种文档加载和处理策略
- 使用向量数据库进行语义检索
- 实现对话历史管理和上下文感知
- 添加来源引用和置信度评估
- 优化检索质量和生成效果

## 🏗️ 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                    RAG 系统架构                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐              │
│  │ 文档加载  │───▶│ 文本分块  │───▶│ 向量化   │              │
│  └──────────┘    └──────────┘    └──────────┘              │
│                                        │                    │
│                                        ▼                    │
│                               ┌──────────────┐             │
│                               │  向量数据库   │             │
│                               └──────────────┘             │
│                                        │                    │
│  ┌──────────┐    ┌──────────┐         │                    │
│  │ 用户查询  │───▶│ 查询处理  │─────────┘                    │
│  └──────────┘    └──────────┘                              │
│                        │                                    │
│                        ▼                                    │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐              │
│  │ 检索文档  │───▶│ 重排序   │───▶│ 生成回答  │              │
│  └──────────┘    └──────────┘    └──────────┘              │
│                                        │                    │
│                                        ▼                    │
│                               ┌──────────────┐             │
│                               │  带引用的回答  │             │
│                               └──────────────┘             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 📁 项目结构

```
01_rag_system/
├── README.md              # 项目文档
├── main.py                # 主程序入口
├── config.py              # 配置管理
├── document_loader.py     # 文档加载模块
├── text_processor.py      # 文本处理模块
├── vector_store.py        # 向量存储模块
├── retriever.py           # 检索模块
├── generator.py           # 生成模块
├── rag_chain.py           # RAG 链整合
└── sample_docs/           # 示例文档
    ├── langchain_intro.txt
    └── python_basics.txt
```

## 🔧 核心组件

### 1. 文档加载器 (DocumentLoader)
- 支持多种格式：TXT、PDF、Markdown、CSV
- 自动格式检测
- 元数据提取

### 2. 文本处理器 (TextProcessor)
- 智能分块策略
- 重叠处理保持上下文
- 元数据保留

### 3. 向量存储 (VectorStore)
- 使用 Chroma 作为向量数据库
- 支持持久化存储
- 高效相似度搜索

### 4. 检索器 (Retriever)
- 语义检索
- 多种检索策略（相似度、MMR）
- 可配置的 top-k

### 5. 生成器 (Generator)
- 基于上下文的回答生成
- 来源引用
- 置信度评估

## 🚀 快速开始

```bash
# 1. 设置环境变量
export OPENAI_API_KEY="your-api-key"

# 2. 运行示例
python main.py
```

## 💡 最佳实践

1. **分块策略**: 根据文档类型选择合适的分块大小
2. **检索优化**: 使用 MMR 增加结果多样性
3. **提示工程**: 设计清晰的提示模板
4. **错误处理**: 实现完善的错误处理机制
5. **性能监控**: 使用 LangSmith 追踪系统性能

## 📚 参考资源

- [LangChain RAG 文档](https://python.langchain.com/docs/tutorials/rag/)
- [Chroma 文档](https://docs.trychroma.com/)
- [向量数据库最佳实践](https://www.pinecone.io/learn/)
